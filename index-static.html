<html>
  <meta charset="UTF-8"/>
  <link type="text/css" href="/style.css" rel="stylesheet"/>
  <script type="text/javascript" src="/jquery.min.js"></script>
  <script type="text/javascript" src="/touched.js"></script>
  <script type="text/javascript" src="/touched-types.js"></script>
  <script type="text/javascript" src="/touched-menu.js"></script>
  <script type="text/javascript" src="/touched-tocode.js"></script>
  <script language="javascript">
      $(function() {
        $('#canvas').bind('update', saveContent);
        loadGrammarFile("<touched:g>");
      });
      function saveContent() {
          var content = $('#canvas').html();
          var http = new XMLHttpRequest();
          http.onreadystatechange = function() { 
             if (http.readyState==4 && http.status!=200) 
                 $('#menu').html('<b>Error saving document</b>');
          };
          http.open("POST", "/save/<touched:file>?code=<touched:code>", true);
          http.send(content);
      }
  </script>
  <body>
    <div id="menubar">
      <ul id="menu"/>
    </div>
    <div style="height:50px">Touched Editor</div>
    <div id="canvas"><touched:content></div>
  </body>
</html>
